"use strict";(self.webpackChunkreact_homepage=self.webpackChunkreact_homepage||[]).push([[866],{866:(e,t,l)=>{l.r(t),l.d(t,{CLICK_CELL:()=>u,RESET_GAME:()=>h,SET_WINNER:()=>d,default:()=>p});var r=l(555),a=l(43),n=l(579);const c=(0,a.memo)(e=>{let{rowIndex:t,cellIndex:l,dispatch:r,cellData:c}=e;const o=(0,a.useCallback)(()=>{console.log("Td clicked: row=".concat(t,", cell=").concat(l,", cellData=").concat(c)),c||r({type:u,row:t,cell:l})},[c,r,t,l]);return(0,n.jsx)("td",{onClick:o,children:c})}),o=(0,a.memo)(e=>{let{rowData:t,rowIndex:l,dispatch:r}=e;return console.log("tr rendered"),(0,n.jsx)("tr",{children:Array(t.length).fill().map((e,a)=>(0,n.jsx)(c,{dispatch:r,rowIndex:l,cellIndex:a,cellData:t[a],children:""},a))})}),s=e=>{let{tableData:t,dispatch:l}=e;return(0,n.jsx)("table",{children:(0,n.jsx)("tbody",{children:Array(t.length).fill().map((e,r)=>(0,n.jsx)(o,{dispatch:l,rowIndex:r,rowData:t[r]},r))})})},i={winner:"",turn:"O",tableData:[["","",""],["","",""],["","",""]],recentCell:[-1,-1],lastPlayer:""},d="SET_WINNER",u="CLICK_CELL",h="RESET_GAME",w=(e,t)=>{switch(console.log("Reducer action:",t),console.log("Reducer state before:",e),t.type){case d:return(0,r.A)((0,r.A)({},e),{},{winner:t.winner});case u:{const l=[...e.tableData];return l[t.row]=[...l[t.row]],l[t.row][t.cell]=e.turn,(0,r.A)((0,r.A)({},e),{},{tableData:l,recentCell:[t.row,t.cell],lastPlayer:e.turn,turn:"O"===e.turn?"X":"O"})}case h:return(0,r.A)((0,r.A)({},e),{},{winner:"",turn:"O",tableData:[["","",""],["","",""],["","",""]],recentCell:[-1,-1],lastPlayer:""});default:return e}},p=()=>{const[e,t]=(0,a.useReducer)(w,i),{tableData:l,turn:r,winner:c,recentCell:o,lastPlayer:u}=e;return(0,a.useEffect)(()=>{console.log("useEffect triggered"),console.log("recentCell:",o,"tableData:",l,"turn:",r,"lastPlayer:",u);const[e,a]=o;if(e<0)return;let n=!1;if(l[e][0]===u&&l[e][1]===u&&l[e][2]===u&&(n=!0),l[0][a]===u&&l[1][a]===u&&l[2][a]===u&&(n=!0),l[0][0]===u&&l[1][1]===u&&l[2][2]===u&&(n=!0),l[0][2]===u&&l[1][1]===u&&l[2][0]===u&&(n=!0),n)t({type:d,winner:u}),setTimeout(()=>{t({type:h})},2e3);else{let e=!0;l.forEach(t=>{t.forEach(t=>{t||(e=!1)})}),e&&(t({type:d,winner:"\ubb34\uc2b9\ubd80"}),setTimeout(()=>{t({type:h})},2e3))}},[o,l,u]),(0,n.jsxs)("div",{className:"tictactoe-container",children:[(0,n.jsx)(s,{tableData:l,dispatch:t}),c&&(0,n.jsx)("div",{className:"tictactoe-winner",children:"\ubb34\uc2b9\ubd80"===c?"\ubb34\uc2b9\ubd80\uc785\ub2c8\ub2e4!":"".concat(c,"\ub2d8\uc758 \uc2b9\ub9ac!")})]})}}}]);
//# sourceMappingURL=866.95e3fb72.chunk.js.map